window.Messenger=function(){function i(i,e,n){var t="";if(arguments.length<2?t="target error - target and name are both required":"object"!=typeof i?t="target error - target itself must be window object":"string"!=typeof e&&(t="target error - target name must be string type"),t)throw new Error(t);this.target=i,this.name=e,this.prefix=n}function e(i,e){this.targets={},this.name=i,this.listenFunc=[],this.prefix=e||n,this.initListen()}var n="[PROJECT_NAME]",t="postMessage"in window;return t?i.prototype.send=function(i){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+i,"*")}:i.prototype.send=function(i){var e=window.navigator[this.prefix+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(this.prefix+i,window)},e.prototype.addTarget=function(e,n){var t=new i(e,n,this.prefix);this.targets[n]=t},e.prototype.initListen=function(){var i=this,e=function(e){"object"==typeof e&&e.data&&(e=e.data);for(var n=e.split("__Messenger__"),e=n[1],t=n[0].split("|"),r=t[0],s=t[1],a=0;a<i.listenFunc.length;a++)r+s===i.prefix+i.name&&i.listenFunc[a](e)};t?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[this.prefix+this.name]=e},e.prototype.listen=function(i){for(var e=0,n=this.listenFunc.length,t=!1;n>e;e++)if(this.listenFunc[e]==i){t=!0;break}t||this.listenFunc.push(i)},e.prototype.clear=function(){this.listenFunc=[]},e.prototype.send=function(i){var e,n=this.targets;for(e in n)n.hasOwnProperty(e)&&n[e].send(i)},e}(),$(function(){function i(i,n){$.ajax({type:"get",url:"http://www.58supin.com/resume/isInWhiteListJsonp?username="+i,dataType:"jsonp",success:function(i){var t=i.isSuccess;t&&e(n),t&&o(__messenger),t&&c(),!t&&$(".screeing-big-interview-ok").die("click")}})}function e(i){$.ajax({type:"get",url:"http://www.58supin.com/resume/getResumeFailReasonJsonp?resumeId="+i,dataType:"jsonp",success:function(i){var e=i.entity;1==e&&($(".screening-btn-jianli").show(),$(".screeing-big-interview-no").show()),0==e&&($(".screening-btn-jianli").hide(),$(".screening-update").show(),$("#reason").show().find("span").text(i.returnMessage))},error:function(){}})}function n(i){var e=m({height:"480px",width:"740px"}).show();e.find("iframe").attr("src",i)}function t(i,e,n){var t=w(i,n);t.find("iframe").hide(),t.find("iframe").attr("src",e)}function r(i,e){var n=i.attr("data-resumeid")||__resumeid,r="http://www.58supin.com/resume/resumeClean?sign=fail&resumeId="+n+"&markstate=0&hrname="+e,s=i.offset().top+i.outerHeight()+3||0,a=i.offset().left-20||0;try{document.domain="58.com";var o=$(parent.document).find("#frm");if(o.length>0){var c=o.innerHeight(),d=o.innerWidth(),p=s+278;p>c&&o.css("height",p+"px"),a+252>d&&(a=d-252)}}catch(f){}var l={top:s+"px",left:a+"px",backgroundColor:"#fff"};t(l,r,i)}function s(i){var e=$(".bigWrap").find("iframe")[0];i.clear(),i.addTarget(e.contentWindow,"iframe"),i.listen(function(i){"2"==i&&$(".bigWrap").hide()})}function a(i,n){var t=$(".screening-small-wrap").find("iframe")[0];i.clear(),i.addTarget(t.contentWindow,"iframe"),i.listen(function(i){if("1"==i){$(".screening-small-wrap").hide();var t;try{t=n.attr("data-resumeid")||__resumeid}catch(r){}e(t),n&&n.hide()}"2"==i&&$(".bigWrap").hide()})}function o(i){$(".screeing-big-interview-no").live("click",function(){var e=$(this).attr("data-resumeid")||__resumeid,t="http://www.58supin.com/resume/resumeClean?sign=comm&resumeId="+e+"&markstate=2&hrname="+u;n(t),i&&s(i)}),$(".screeing-big-interview-ok").live("click",function(){var e=$(this).attr("data-resumeid")||__resumeid,t="http://www.58supin.com/resume/resumeClean?sign=comm&resumeId="+e+"&markstate=3&hrname="+u;n(t),i&&s(i)}),$(".screening-btn-jianli").live("click",function(){r($(this),u),i&&a(i,$(this))}),$(".screening-update").live("click",function(){r($(this),u),i&&a(i,$(this))}),$(".screening-btn-vip").bind("click",function(e){e.stopPropagation(),r($(this),u),i&&a(i)})}function c(){$("#check_info").die("click").live("click",function(){$("#reason").is(":hidden")&&setTimeout(function(){$(".screening-btn-jianli").show()},200)});var i=$(".screening-btn-jianli"),e=$(".screeing-big-interview-ok");if(i.length<=0&&e.length<=0){var n=$("#reason"),t=$("#reason").find(".screening-update").attr("data-resumeid");if(n.is(":hidden")){var r=$('<li class="noborder"><button href="javascript:void(0)" class="screening-btn-jianli lookAllWay" data-resumeid="'+t+'" style="display: none;">不符合条件</button></li>');n.parent().find(".summ").append(r)}}}for(var d=document.cookie.split(";"),p=0;p<d.length;p++)if("58cooper"==d[p].substring(1,9))var f=d[p].indexOf("username")+9,l=d[p].substring(f,d[p].length),h=l.indexOf("&"),u=l.substring(0,h);"undefined"==typeof u&&(u=""),"undefined"==typeof __resumeid&&(__resumeid="");try{__messenger=new Messenger("parent")}catch(g){__messenger=null}i(u,__resumeid),$("#navlist").find("li").live("click",function(){var e=$(this).attr("rid")||__resumeid;i(u,e),$(".screening-small-wrap").hide(),c()}),$("#rpre, #rnext").live("click",function(){var e=$("#navlist").find("li.selected").attr("rid");e&&(i(u,e),$(".screening-small-wrap").hide(),c())});var m=function(){var i;return function(e){if(!i){var n='<div class="bigWrap"><div class="bigWrapMain"><h1 class="wrapTitle"><span class="titleText">简历筛选</span><button class="titleBtn">X</button></h1><div class="wrapContent" style="width: 94%; margin: 0 3%"><iframe frameborder="0"></iframe><div class="loading"><img style="widht:50px;height:50px;margin-top:150px;" src="http://c.58cdn.com.cn/crop/supin/pcsite/images/jianli_loading.gif" alt="加载中..." /></div>',t={position:"fixed",top:"0px",left:"0px",zIndex:"9999",backgroundColor:"rgba(0, 0, 0, 0.8)",width:"100%",height:"100%"},r={position:"relative",backgroundColor:"#FFF",border:"1px solid #f70",borderRadius:"4px",left:"50%",top:"50%"},s={height:"38px",padding:"0px 5px",lineHeight:"38px",fontSize:"16px",borderBottom:"1px solid #CCC"},a={cssFloat:"right",backgroundColor:"#f70",color:"#FFF",right:"0px",margin:"6px 0px 5px",padding:"2px",cursor:"pointer",fontSize:"16px",height:"24px",lineHeight:"24px",width:"24px",border:"0px"},o={width:"100%",height:"100%",display:"none"},c={width:"100%",height:"100%",textAlign:"center"};i=$(n).css(t),i.find(".bigWrapMain").css(r),i.find(".wrapTitle").css(s),i.find("iframe").css(o),i.find(".loading").css(c),setTimeout(function(){i.find("iframe").load(function(){i.find(".loading").hide(),$(this).show()})}),i.find(".titleBtn").css(a).click(function(){i.hide()}),$("body").append(i)}var d=i.find(".bigWrapMain");d.css(e);var p=parseInt(e.height)-44;return i.find(".wrapContent").css("height",p+"px"),d.css({marginTop:-(parseInt(e.height)/2)+"px",marginLeft:-(parseInt(e.width)/2)+"px"}),i.find("iframe").hide(),i.find(".loading").show(),i}}(),w=function(){var i;return function(e,n){if(!i){var t='<div class="screening-small-wrap"><button class="screening-close">X</button><iframe frameborder="0"></iframe><div class="loading"><img style="widht:50px;height:50px;display:block;position:absolute;left:50%;margin-left:-25px;top:50%;margin-top:-25px;" src="http://c.58cdn.com.cn/crop/supin/pcsite/images/jianli_loading.gif" alt="加载中"/></div></div>',r={position:"absolute",border:"2px solid #f70",zIndex:"9999",width:"254px",height:"267px"},s={position:"absolute",right:"0px",margin:"5px",padding:"5px",backgroundColor:"#f70",color:"#FFF",cursor:"pointer",border:"0px"},a={height:"100%",width:"100%",display:"none"},o={width:"254px",height:"267px",position:"relative"};i=$(t).css(r),i.find(".loading").css(o),setTimeout(function(){i.find("iframe").css(a).load(function(e){$(this).show(),i.find(".loading").hide()})},0),i.find(".screening-close").css(s).click(function(){$(this).parent().hide()}),$("body").append(i)}return i.css(e||{}).show(),i.find(".loading").show(),i}}()});